{
    "sourceFile": "backend/index.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1739861158522,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1739861277058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n const cors = require(\"cors\");\n require(\"dotenv\").config();\n \n const app = express();\n-const PORT = process.env.PORT || 5000;\n+const PORT = process.env.PORT || 5001;\n \n app.use(express.json());\n app.use(cors());\n \n"
                },
                {
                    "date": 1739861421718,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,19 +1,36 @@\n const express = require(\"express\");\n const cors = require(\"cors\");\n+const { Configuration, OpenAIApi } = require(\"openai\");\n require(\"dotenv\").config();\n \n const app = express();\n-const PORT = process.env.PORT || 5001;\n+const PORT = process.env.PORT || 5000;\n \n app.use(express.json());\n app.use(cors());\n \n-// Test Route\n-app.get(\"/\", (req, res) => {\n-    res.send(\"AI-Powered E-Commerce Chatbot Backend is Running!\");\n+// OpenAI API Configuration\n+const openai = new OpenAIApi(\n+  new Configuration({ apiKey: process.env.OPENAI_API_KEY })\n+);\n+\n+// Chatbot API Route\n+app.post(\"/chat\", async (req, res) => {\n+  try {\n+    const { message } = req.body;\n+    const response = await openai.createCompletion({\n+      model: \"text-davinci-003\",\n+      prompt: `User: ${message}\\nBot:`,\n+      max_tokens: 100,\n+    });\n+\n+    res.json({ reply: response.data.choices[0].text.trim() });\n+  } catch (error) {\n+    res.status(500).json({ error: \"Error generating response\" });\n+  }\n });\n \n-// Start Server\n+// Start the server\n app.listen(PORT, () => {\n-    console.log(`Backend server running on http://localhost:${PORT}`);\n+  console.log(`Backend server running on http://localhost:${PORT}`);\n });\n"
                },
                {
                    "date": 1739862648178,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,33 +1,34 @@\n const express = require(\"express\");\n const cors = require(\"cors\");\n-const { Configuration, OpenAIApi } = require(\"openai\");\n+const OpenAI = require(\"openai\"); // Correct import for OpenAI\n require(\"dotenv\").config();\n \n const app = express();\n-const PORT = process.env.PORT || 5000;\n+const PORT = process.env.PORT || 5001;\n \n app.use(express.json());\n app.use(cors());\n \n // OpenAI API Configuration\n-const openai = new OpenAIApi(\n-  new Configuration({ apiKey: process.env.OPENAI_API_KEY })\n-);\n+const openai = new OpenAI({\n+  apiKey: process.env.OPENAI_API_KEY, // Uses API Key from .env file\n+});\n \n // Chatbot API Route\n app.post(\"/chat\", async (req, res) => {\n   try {\n     const { message } = req.body;\n-    const response = await openai.createCompletion({\n+    const response = await openai.completions.create({\n       model: \"text-davinci-003\",\n       prompt: `User: ${message}\\nBot:`,\n       max_tokens: 100,\n     });\n \n-    res.json({ reply: response.data.choices[0].text.trim() });\n+    res.json({ reply: response.choices[0].text.trim() });\n   } catch (error) {\n-    res.status(500).json({ error: \"Error generating response\" });\n+    console.error(\"Error generating response:\", error);\n+    res.status(500).json({ error: \"Internal Server Error\" });\n   }\n });\n \n // Start the server\n"
                },
                {
                    "date": 1739863159296,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n const express = require(\"express\");\n const cors = require(\"cors\");\n-const OpenAI = require(\"openai\"); // Correct import for OpenAI\n+const OpenAI = require(\"openai\"); // Correct OpenAI import\n require(\"dotenv\").config();\n \n const app = express();\n const PORT = process.env.PORT || 5001;\n@@ -17,15 +17,16 @@\n // Chatbot API Route\n app.post(\"/chat\", async (req, res) => {\n   try {\n     const { message } = req.body;\n-    const response = await openai.completions.create({\n-      model: \"text-davinci-003\",\n-      prompt: `User: ${message}\\nBot:`,\n+    \n+    const response = await openai.chat.completions.create({\n+      model: \"gpt-3.5-turbo\", // Updated model\n+      messages: [{ role: \"system\", content: \"You are a helpful assistant.\" }, { role: \"user\", content: message }],\n       max_tokens: 100,\n     });\n \n-    res.json({ reply: response.choices[0].text.trim() });\n+    res.json({ reply: response.choices[0].message.content.trim() });\n   } catch (error) {\n     console.error(\"Error generating response:\", error);\n     res.status(500).json({ error: \"Internal Server Error\" });\n   }\n"
                }
            ],
            "date": 1739861158522,
            "name": "Commit-0",
            "content": "const express = require(\"express\");\nconst cors = require(\"cors\");\nrequire(\"dotenv\").config();\n\nconst app = express();\nconst PORT = process.env.PORT || 5000;\n\napp.use(express.json());\napp.use(cors());\n\n// Test Route\napp.get(\"/\", (req, res) => {\n    res.send(\"AI-Powered E-Commerce Chatbot Backend is Running!\");\n});\n\n// Start Server\napp.listen(PORT, () => {\n    console.log(`Backend server running on http://localhost:${PORT}`);\n});\n"
        }
    ]
}